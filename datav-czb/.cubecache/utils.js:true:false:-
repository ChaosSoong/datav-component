{"queryPath":"/utils.js","absPath":"/Users/william/Desktop/czb/datav-component/datav-czb/utils.js","realPath":"/utils.js","type":"script","source":"var MD5 = require('MD5')\nvar $ = require('jquery');\n/**\n * 生成签名\n * @param {Object} res  需要签名的请求对象\n * @return {String}     返回签名串\n */\nconst _signature = res => {\n  var objs = []\n  var strs = ''\n\n  // 1. 将对象转成数组\n  for (var i in res) {\n    objs.push([i, res[i]])\n  }\n\n  // 2. 对数组进行排序\n  __sort(objs, function (a, b) {\n    return a[0] > b[0]\n  })\n\n  // 3. 拼接成字符串(过滤值为 null / undefined)\n  for (let i = 0; i < objs.length; i++) {\n    strs += objs[i][0] + '' + ((objs[i][1] === null || objs[i][1] === undefined) ? '' : objs[i][1])\n  }\n  // 4. MD5加密串\n  return MD5('f7af5fba518c79bff68de814e7c0efbb' + strs + 'f7af5fba518c79bff68de814e7c0efbb').toLowerCase()\n}\n\n/**\n * 模拟 sort 排序 (解决 Safari 下 soft 的 BUG)\n * @param  {Array}   array 需要排序的数组\n * @param  {Function} fn   排序函数\n * @return {Array}         返回排序后的数组\n */\nconst __sort = (array, fn) => {\n  for (var i = 0; i < array.length - 1; i++) {\n    var isSorted = true\n    for (var j = 0; j < array.length - 1 - i; j++) {\n      if (fn(array[j], array[j + 1]) > 0) {\n        var temp = array[j]\n        array[j] = array[j + 1]\n        array[j + 1] = temp\n        isSorted = false\n      }\n    }\n    if (isSorted) {\n      return false\n    }\n  }\n}\nconst ajax = (url) => {\n  return new Promise((resolve, reject)=>{\n    let timestamp = new Date().getTime()\n    let data = { \n      app_key: 'pcmwlhff68de',\n      timestamp: timestamp,\n      token: '',\n      sign: _signature({\n        app_key: 'pcmwlhff68de',\n        timestamp: timestamp,\n        token:''\n      })\n    }\n    $.ajax({\n      url: url, \n      type: 'POST',\n      contentType:'application/x-www-form-urlencoded;charset=UTF-8',\n      data: data, \n      success: function(res) {\n        resolve(res)\n      },\n      error: function(error){\n        reject(error)\n      }\n    });\n  })\n    \n}\nexport {\n  ajax\n}","code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar MD5 = require('MD5');\nvar $ = require('jquery');\n\nvar _signature = function _signature(res) {\n  var objs = [];\n  var strs = '';\n\n  for (var i in res) {\n    objs.push([i, res[i]]);\n  }\n\n  __sort(objs, function (a, b) {\n    return a[0] > b[0];\n  });\n\n  for (var _i = 0; _i < objs.length; _i++) {\n    strs += objs[_i][0] + '' + (objs[_i][1] === null || objs[_i][1] === undefined ? '' : objs[_i][1]);\n  }\n\n  return MD5('f7af5fba518c79bff68de814e7c0efbb' + strs + 'f7af5fba518c79bff68de814e7c0efbb').toLowerCase();\n};\n\nvar __sort = function __sort(array, fn) {\n  for (var i = 0; i < array.length - 1; i++) {\n    var isSorted = true;\n    for (var j = 0; j < array.length - 1 - i; j++) {\n      if (fn(array[j], array[j + 1]) > 0) {\n        var temp = array[j];\n        array[j] = array[j + 1];\n        array[j + 1] = temp;\n        isSorted = false;\n      }\n    }\n    if (isSorted) {\n      return false;\n    }\n  }\n};\nvar ajax = function ajax(url) {\n  return new Promise(function (resolve, reject) {\n    var timestamp = new Date().getTime();\n    var data = {\n      app_key: 'pcmwlhff68de',\n      timestamp: timestamp,\n      token: '',\n      sign: _signature({\n        app_key: 'pcmwlhff68de',\n        timestamp: timestamp,\n        token: ''\n      })\n    };\n    $.ajax({\n      url: url,\n      type: 'POST',\n      contentType: 'application/x-www-form-urlencoded;charset=UTF-8',\n      data: data,\n      success: function success(res) {\n        resolve(res);\n      },\n      error: function error(_error) {\n        reject(_error);\n      }\n    });\n  });\n};\nexports.ajax = ajax;","codeWraped":"Cube(\"/utils.js\", [\"/node_modules/MD5/md5.js\", \"/node_modules/jquery/dist/jquery.js\"], function (module, exports, require, load, process, global) {\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true });\n\n  var MD5 = require('/node_modules/MD5/md5.js');\n  var $ = require('/node_modules/jquery/dist/jquery.js');\n\n  var _signature = function _signature(res) {\n    var objs = [];\n    var strs = '';\n\n    for (var i in res) {\n      objs.push([i, res[i]]);\n    }\n\n    __sort(objs, function (a, b) {\n      return a[0] > b[0];\n    });\n\n    for (var _i = 0; _i < objs.length; _i++) {\n      strs += objs[_i][0] + '' + (objs[_i][1] === null || objs[_i][1] === undefined ? '' : objs[_i][1]);\n    }\n\n    return MD5('f7af5fba518c79bff68de814e7c0efbb' + strs + 'f7af5fba518c79bff68de814e7c0efbb').toLowerCase();\n  };\n\n  var __sort = function __sort(array, fn) {\n    for (var i = 0; i < array.length - 1; i++) {\n      var isSorted = true;\n      for (var j = 0; j < array.length - 1 - i; j++) {\n        if (fn(array[j], array[j + 1]) > 0) {\n          var temp = array[j];\n          array[j] = array[j + 1];\n          array[j + 1] = temp;\n          isSorted = false;\n        }\n      }\n      if (isSorted) {\n        return false;\n      }\n    }\n  };\n  var ajax = function ajax(url) {\n    return new Promise(function (resolve, reject) {\n      var timestamp = new Date().getTime();\n      var data = {\n        app_key: 'pcmwlhff68de',\n        timestamp: timestamp,\n        token: '',\n        sign: _signature({\n          app_key: 'pcmwlhff68de',\n          timestamp: timestamp,\n          token: '' }) };\n\n\n      $.ajax({\n        url: url,\n        type: 'POST',\n        contentType: 'application/x-www-form-urlencoded;charset=UTF-8',\n        data: data,\n        success: function success(res) {\n          resolve(res);\n        },\n        error: function error(_error) {\n          reject(_error);\n        } });\n\n    });\n  };\n  exports.ajax = ajax;return module.exports;});","sourceMap":null,"modifyTime":1555472001518,"mime":"application/javascript","wrap":true,"skip":false,"compress":false,"ext":".js","targetExt":".js","loads":[],"originalLoads":[],"requires":["/node_modules/MD5/md5.js","/node_modules/jquery/dist/jquery.js"],"requiresOrigin":["/node_modules/MD5/md5.js","/node_modules/jquery/dist/jquery.js"],"debugInfo":[],"requiresArgsRefer":[{"type":"StringLiteral","start":98,"end":103,"loc":{"start":{"line":6,"column":18},"end":{"line":6,"column":23}},"extra":{"rawValue":"MD5","raw":"'MD5'"},"value":"/node_modules/MD5/md5.js"},{"type":"StringLiteral","start":122,"end":130,"loc":{"start":{"line":7,"column":16},"end":{"line":7,"column":24}},"extra":{"rawValue":"jquery","raw":"'jquery'"},"value":"/node_modules/jquery/dist/jquery.js"}]}