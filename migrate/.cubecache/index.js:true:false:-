{"queryPath":"/index.js","absPath":"/Users/william/Desktop/czb/datav-component/migrate/index.js","realPath":"/index.js","type":"script","source":"var Event = require('bcore/event')\nvar $ = require('jquery')\nvar _ = require('lodash')\nvar Chart = require('echarts')\nconst map = require('echarts/map/json/china.json')\nChart.registerMap('china', map)\nvar geoCoordMap = {\n  上海: [121.4648, 31.2891],\n  东莞: [113.8953, 22.901],\n  东营: [118.7073, 37.5513],\n  中山: [113.4229, 22.478],\n  临汾: [111.4783, 36.1615],\n  临沂: [118.3118, 35.2936],\n  丹东: [124.541, 40.4242],\n  丽水: [119.5642, 28.1854],\n  乌鲁木齐: [87.9236, 43.5883],\n  佛山: [112.8955, 23.1097],\n  保定: [115.0488, 39.0948],\n  兰州: [103.5901, 36.3043],\n  包头: [110.3467, 41.4899],\n  北京: [116.4551, 40.2539],\n  北海: [109.314, 21.6211],\n  南京: [118.8062, 31.9208],\n  南宁: [108.479, 23.1152],\n  南昌: [116.0046, 28.6633],\n  南通: [121.1023, 32.1625],\n  厦门: [118.1689, 24.6478],\n  台州: [121.1353, 28.6688],\n  合肥: [117.29, 32.0581],\n  呼和浩特: [111.4124, 40.4901],\n  咸阳: [108.4131, 34.8706],\n  哈尔滨: [127.9688, 45.368],\n  唐山: [118.4766, 39.6826],\n  嘉兴: [120.9155, 30.6354],\n  大同: [113.7854, 39.8035],\n  大连: [122.2229, 39.4409],\n  天津: [117.4219, 39.4189],\n  太原: [112.3352, 37.9413],\n  威海: [121.9482, 37.1393],\n  宁波: [121.5967, 29.6466],\n  宝鸡: [107.1826, 34.3433],\n  宿迁: [118.5535, 33.7775],\n  常州: [119.4543, 31.5582],\n  广州: [113.5107, 23.2196],\n  廊坊: [116.521, 39.0509],\n  延安: [109.1052, 36.4252],\n  张家口: [115.1477, 40.8527],\n  徐州: [117.5208, 34.3268],\n  德州: [116.6858, 37.2107],\n  惠州: [114.6204, 23.1647],\n  成都: [103.9526, 30.7617],\n  扬州: [119.4653, 32.8162],\n  承德: [117.5757, 41.4075],\n  拉萨: [91.1865, 30.1465],\n  无锡: [120.3442, 31.5527],\n  日照: [119.2786, 35.5023],\n  昆明: [102.9199, 25.4663],\n  杭州: [119.5313, 29.8773],\n  枣庄: [117.323, 34.8926],\n  柳州: [109.3799, 24.9774],\n  株洲: [113.5327, 27.0319],\n  武汉: [114.3896, 30.6628],\n  汕头: [117.1692, 23.3405],\n  江门: [112.6318, 22.1484],\n  沈阳: [123.1238, 42.1216],\n  沧州: [116.8286, 38.2104],\n  河源: [114.917, 23.9722],\n  泉州: [118.3228, 25.1147],\n  泰安: [117.0264, 36.0516],\n  泰州: [120.0586, 32.5525],\n  济南: [117.1582, 36.8701],\n  济宁: [116.8286, 35.3375],\n  海口: [110.3893, 19.8516],\n  淄博: [118.0371, 36.6064],\n  淮安: [118.927, 33.4039],\n  深圳: [114.5435, 22.5439],\n  清远: [112.9175, 24.3292],\n  温州: [120.498, 27.8119],\n  渭南: [109.7864, 35.0299],\n  湖州: [119.8608, 30.7782],\n  湘潭: [112.5439, 27.7075],\n  滨州: [117.8174, 37.4963],\n  潍坊: [119.0918, 36.524],\n  烟台: [120.7397, 37.5128],\n  玉溪: [101.9312, 23.8898],\n  珠海: [113.7305, 22.1155],\n  盐城: [120.2234, 33.5577],\n  盘锦: [121.9482, 41.0449],\n  石家庄: [114.4995, 38.1006],\n  福州: [119.4543, 25.9222],\n  秦皇岛: [119.2126, 40.0232],\n  绍兴: [120.564, 29.7565],\n  聊城: [115.9167, 36.4032],\n  肇庆: [112.1265, 23.5822],\n  舟山: [122.2559, 30.2234],\n  苏州: [120.6519, 31.3989],\n  莱芜: [117.6526, 36.2714],\n  菏泽: [115.6201, 35.2057],\n  营口: [122.4316, 40.4297],\n  葫芦岛: [120.1575, 40.578],\n  衡水: [115.8838, 37.7161],\n  衢州: [118.6853, 28.8666],\n  西宁: [101.4038, 36.8207],\n  西安: [109.1162, 34.2004],\n  贵阳: [106.6992, 26.7682],\n  连云港: [119.1248, 34.552],\n  邢台: [114.8071, 37.2821],\n  邯郸: [114.4775, 36.535],\n  郑州: [113.4668, 34.6234],\n  鄂尔多斯: [108.9734, 39.2487],\n  重庆: [107.7539, 30.1904],\n  金华: [120.0037, 29.1028],\n  铜川: [109.0393, 35.1947],\n  银川: [106.3586, 38.1775],\n  镇江: [119.4763, 31.9702],\n  长春: [125.8154, 44.2584],\n  长沙: [113.0823, 28.2568],\n  长治: [112.8625, 36.4746],\n  阳泉: [113.4778, 38.0951],\n  青岛: [120.4651, 36.3373],\n  韶关: [113.7964, 24.7028]\n}\n\nvar QDData = [\n  [{ name: '青岛' }, { name: '上海', value: 10 }],\n  [{ name: '青岛' }, { name: '广州', value: 10 }],\n  [{ name: '青岛' }, { name: '大连', value: 10 }],\n  [{ name: '青岛' }, { name: '南宁', value: 10 }],\n  [{ name: '青岛' }, { name: '西宁', value: 10 }],\n  [{ name: '青岛' }, { name: '南昌', value: 10 }],\n  [{ name: '青岛' }, { name: '拉萨', value: 10 }],\n  [{ name: '青岛' }, { name: '长春', value: 10 }],\n  [{ name: '青岛' }, { name: '重庆', value: 10 }],\n  [{ name: '青岛' }, { name: '常州', value: 10 }],\n  [{ name: '青岛' }, { name: '沈阳', value: 10 }],\n  [{ name: '青岛' }, { name: '武汉', value: 10 }],\n  [{ name: '青岛' }, { name: '长沙', value: 10 }],\n  [{ name: '青岛' }, { name: '太原', value: 10 }],\n  [{ name: '青岛' }, { name: '哈尔滨', value: 10 }],\n  [{ name: '青岛' }, { name: '石家庄', value: 10 }],\n  [{ name: '青岛' }, { name: '杭州', value: 10 }],\n  [{ name: '青岛' }, { name: '南京', value: 10 }],\n  [{ name: '青岛' }, { name: '福州', value: 10 }],\n  [{ name: '青岛' }, { name: '西宁', value: 10 }],\n  [{ name: '青岛' }, { name: '合肥', value: 10 }],\n  [{ name: '青岛' }, { name: '呼和浩特', value: 10 }],\n  [{ name: '青岛' }, { name: '乌鲁木齐', value: 10 }],\n  [{ name: '青岛' }, { name: '银川', value: 10 }],\n  [{ name: '青岛' }, { name: '贵阳', value: 10 }],\n  [{ name: '青岛' }, { name: '昆明', value: 10 }],\n  [{ name: '青岛' }, { name: '兰州', value: 10 }],\n  [{ name: '青岛' }, { name: '郑州', value: 10 }],\n  [{ name: '青岛' }, { name: '成都', value: 10 }],\n  [{ name: '青岛' }, { name: '海口', value: 10 }]\n]\n\nvar BJData = [\n  [{ name: '北京' }, { name: '上海', value: 95 }],\n  [{ name: '北京' }, { name: '广州', value: 90 }],\n  [{ name: '北京' }, { name: '大连', value: 80 }],\n  [{ name: '北京' }, { name: '南宁', value: 70 }],\n  [{ name: '北京' }, { name: '南昌', value: 60 }],\n  [{ name: '北京' }, { name: '拉萨', value: 50 }],\n  [{ name: '北京' }, { name: '长春', value: 40 }],\n  [{ name: '北京' }, { name: '包头', value: 30 }],\n  [{ name: '北京' }, { name: '重庆', value: 20 }],\n  [{ name: '北京' }, { name: '常州', value: 10 }]\n]\n\nvar SHData = [\n  [{ name: '上海' }, { name: '包头', value: 95 }],\n  [{ name: '上海' }, { name: '昆明', value: 90 }],\n  [{ name: '上海' }, { name: '广州', value: 80 }],\n  [{ name: '上海' }, { name: '郑州', value: 70 }],\n  [{ name: '上海' }, { name: '长春', value: 60 }],\n  [{ name: '上海' }, { name: '重庆', value: 50 }],\n  [{ name: '上海' }, { name: '长沙', value: 40 }],\n  [{ name: '上海' }, { name: '北京', value: 30 }],\n  [{ name: '上海' }, { name: '丹东', value: 20 }],\n  [{ name: '上海' }, { name: '大连', value: 10 }]\n]\n\nvar GZData = [\n  [{ name: '广州' }, { name: '福州', value: 95 }],\n  [{ name: '广州' }, { name: '太原', value: 90 }],\n  [{ name: '广州' }, { name: '长春', value: 80 }],\n  [{ name: '广州' }, { name: '重庆', value: 70 }],\n  [{ name: '广州' }, { name: '西安', value: 60 }],\n  [{ name: '广州' }, { name: '成都', value: 50 }],\n  [{ name: '广州' }, { name: '常州', value: 40 }],\n  [{ name: '广州' }, { name: '北京', value: 30 }],\n  [{ name: '广州' }, { name: '北海', value: 20 }],\n  [{ name: '广州' }, { name: '海口', value: 10 }]\n]\n\nvar planePath =\n  'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z'\n\nvar convertData = function(data) {\n  var res = []\n  for (var i = 0; i < data.length; i++) {\n    var dataItem = data[i]\n    var fromCoord = geoCoordMap[dataItem[0].name]\n    var toCoord = geoCoordMap[dataItem[1].name]\n    if (fromCoord && toCoord) {\n      res.push([\n        {\n          coord: fromCoord\n        },\n        {\n          coord: toCoord\n        }\n      ])\n    }\n  }\n  return res\n}\n\nvar color = ['#a6c84c', '#ffa022', '#46bee9']\nvar series = []\n;[['青岛', QDData]].forEach(function(item, i) {\n  series.push(\n    {\n      name: item[0],\n      type: 'lines',\n      zlevel: 1,\n      effect: {\n        show: true,\n        period: 6,\n        trailLength: 0.5,\n        color: '#fff',\n        symbolSize: 3\n      },\n      lineStyle: {\n        normal: {\n          color: color[i],\n          width: 0,\n          curveness: 0.2\n        }\n      },\n      data: convertData(item[1])\n    },\n    {\n      name: item[0] + ' Top10',\n      type: 'lines',\n      zlevel: 2,\n      effect: {\n        show: true,\n        period: 6,\n        trailLength: 0,\n        symbol: planePath,\n        symbolSize: 10\n      },\n      lineStyle: {\n        normal: {\n          color: color[i],\n          width: 1,\n          opacity: 0.4,\n          curveness: 0.2\n        }\n      },\n      data: convertData(item[1])\n    },\n    {\n      name: item[0] + ' Top10',\n      type: 'effectScatter',\n      coordinateSystem: 'geo',\n      zlevel: 2,\n      rippleEffect: {\n        brushType: 'stroke'\n      },\n      label: {\n        normal: {\n          show: false,\n          position: 'right',\n          formatter: '{b}'\n        }\n      },\n      symbolSize: function(val) {\n        return val[2] / 8\n      },\n      itemStyle: {\n        normal: {\n          color: color[i]\n        }\n      },\n      data: item[1].map(function(dataItem) {\n        return {\n          name: dataItem[1].name,\n          value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])\n        }\n      })\n    }\n  )\n})\nseries.push({\n  name: '青岛',\n  type: 'effectScatter',\n  coordinateSystem: 'geo',\n  symbolSize: 16,\n  data: [\n    {\n      name: '青岛',\n      value: [120.4651, 36.3373]\n    }\n  ],\n  itemStyle: {\n    normal: {\n      color: '#00ffff'\n    }\n  }\n})\noption = {\n  backgroundColor: '#404a59',\n  // title: {\n  //   text: '模拟迁徙',\n  //   subtext: '数据纯属虚构',\n  //   left: 'center',\n  //   textStyle: {\n  //     color: '#fff'\n  //   }\n  // },\n  tooltip: {\n    trigger: 'none'\n  },\n  // legend: {\n  //   orient: 'vertical',\n  //   top: 'bottom',\n  //   left: 'right',\n  //   data: ['北京 Top10', '上海 Top10', '广州 Top10'],\n  //   textStyle: {\n  //     color: '#fff'\n  //   },\n  //   selectedMode: 'single'\n  // },\n  geo: {\n    map: 'china',\n    label: {\n      emphasis: {\n        show: false\n      },\n      normal: {\n        show: false\n      }\n    },\n    regions: [],\n    roam: false,\n    itemStyle: {\n      normal: {\n        areaColor: '#323c48',\n        borderColor: '#404a59'\n      },\n      emphasis: {\n        areaColor: '#2a333d'\n      }\n    }\n  },\n  series: series\n}\n/**\n * 马良基础类\n */\nmodule.exports = Event.extend(\n  function Base(container, config) {\n    this.config = {\n      theme: {}\n    }\n    this.container = $(container) //容器\n    this.apis = config.apis //hook一定要有\n    this._data = null //数据\n    this.chart = null //图表\n    this.init(config)\n  },\n  {\n    /**\n     * 公有初始化\n     */\n    init: function(config) {\n      //1.初始化,合并配置\n      this.mergeConfig(config)\n      //2.刷新布局,针对有子组件的组件 可有可无\n      this.updateLayout()\n      //3.子组件实例化\n      this.chart = Chart.init(this.container[0])\n      //4.如果有需要, 更新样式\n      this.updateStyle()\n    },\n    /**\n     * 绘制\n     * @param data\n     * @param options 不一定有\n     * !!注意: 第二个参数支持config, 就不需要updateOptions这个方法了\n     */\n    render: function(data, config) {\n      data = this.data(data)\n      var cfg = this.mergeConfig(config)\n      //更新图表\n      //this.chart.render(data, cfg);\n      // this.container.html(data[0].value)\n      this.chart.setOption(option)\n      //如果有需要的话,更新样式\n      this.updateStyle()\n    },\n    /**\n     *\n     * @param width\n     * @param height\n     */\n    resize: function(width, height) {\n      this.updateLayout(width, height)\n      //更新图表\n      //this.chart.render({\n      //  width: width,\n      //  height: height\n      //})\n      this.chart.resize()\n    },\n    /**\n     * 每个组件根据自身需要,从主题中获取颜色 覆盖到自身配置的颜色中.\n     * 暂时可以不填内容\n     */\n    setColors: function() {\n      //比如\n      //var cfg = this.config;\n      //cfg.color = cfg.theme.series[0] || cfg.color;\n    },\n    /**\n     * 数据,设置和获取数据\n     * @param data\n     * @returns {*|number}\n     */\n    data: function(data) {\n      if (data) {\n        this._data = data\n      }\n      return this._data\n    },\n    /**\n     * 更新配置\n     * 优先级: config.colors > config.theme > this.config.theme > this.config.colors\n     * [注] 有数组的配置一定要替换\n     * @param config\n     * @private\n     */\n    mergeConfig: function(config) {\n      if (!config) {\n        return this.config\n      }\n      this.config.theme = _.defaultsDeep(config.theme || {}, this.config.theme)\n      this.setColors()\n      this.config = _.defaultsDeep(config || {}, this.config)\n      return this.config\n    },\n    /**\n     * 更新布局\n     * 可有可无\n     */\n    updateLayout: function() {},\n    /**\n     * 更新样式\n     * 有些子组件控制不到的,但是需要控制改变的,在这里实现\n     */\n    updateStyle: function() {\n      var cfg = this.config\n      this.container.css({\n        'font-size': cfg.size + 'px',\n        color: cfg.color || '#fff'\n      })\n    },\n    /**\n     * 更新配置\n     * !!注意:如果render支持第二个参数options, 那updateOptions不是必须的\n     */\n    //updateOptions: function (options) {},\n    /**\n     * 更新某些配置\n     * 给可以增量更新配置的组件用\n     */\n    //updateXXX: function () {},\n    /**\n     * 销毁组件\n     */\n    destroy: function() {\n      console.log('请实现 destroy 方法')\n    }\n  }\n)\n","code":"'use strict';\n\nvar Event = require('bcore/event');\nvar $ = require('jquery');\nvar _ = require('lodash');\nvar Chart = require('echarts');\nvar map = require('echarts/map/json/china.json');\nChart.registerMap('china', map);\nvar geoCoordMap = {\n  上海: [121.4648, 31.2891],\n  东莞: [113.8953, 22.901],\n  东营: [118.7073, 37.5513],\n  中山: [113.4229, 22.478],\n  临汾: [111.4783, 36.1615],\n  临沂: [118.3118, 35.2936],\n  丹东: [124.541, 40.4242],\n  丽水: [119.5642, 28.1854],\n  乌鲁木齐: [87.9236, 43.5883],\n  佛山: [112.8955, 23.1097],\n  保定: [115.0488, 39.0948],\n  兰州: [103.5901, 36.3043],\n  包头: [110.3467, 41.4899],\n  北京: [116.4551, 40.2539],\n  北海: [109.314, 21.6211],\n  南京: [118.8062, 31.9208],\n  南宁: [108.479, 23.1152],\n  南昌: [116.0046, 28.6633],\n  南通: [121.1023, 32.1625],\n  厦门: [118.1689, 24.6478],\n  台州: [121.1353, 28.6688],\n  合肥: [117.29, 32.0581],\n  呼和浩特: [111.4124, 40.4901],\n  咸阳: [108.4131, 34.8706],\n  哈尔滨: [127.9688, 45.368],\n  唐山: [118.4766, 39.6826],\n  嘉兴: [120.9155, 30.6354],\n  大同: [113.7854, 39.8035],\n  大连: [122.2229, 39.4409],\n  天津: [117.4219, 39.4189],\n  太原: [112.3352, 37.9413],\n  威海: [121.9482, 37.1393],\n  宁波: [121.5967, 29.6466],\n  宝鸡: [107.1826, 34.3433],\n  宿迁: [118.5535, 33.7775],\n  常州: [119.4543, 31.5582],\n  广州: [113.5107, 23.2196],\n  廊坊: [116.521, 39.0509],\n  延安: [109.1052, 36.4252],\n  张家口: [115.1477, 40.8527],\n  徐州: [117.5208, 34.3268],\n  德州: [116.6858, 37.2107],\n  惠州: [114.6204, 23.1647],\n  成都: [103.9526, 30.7617],\n  扬州: [119.4653, 32.8162],\n  承德: [117.5757, 41.4075],\n  拉萨: [91.1865, 30.1465],\n  无锡: [120.3442, 31.5527],\n  日照: [119.2786, 35.5023],\n  昆明: [102.9199, 25.4663],\n  杭州: [119.5313, 29.8773],\n  枣庄: [117.323, 34.8926],\n  柳州: [109.3799, 24.9774],\n  株洲: [113.5327, 27.0319],\n  武汉: [114.3896, 30.6628],\n  汕头: [117.1692, 23.3405],\n  江门: [112.6318, 22.1484],\n  沈阳: [123.1238, 42.1216],\n  沧州: [116.8286, 38.2104],\n  河源: [114.917, 23.9722],\n  泉州: [118.3228, 25.1147],\n  泰安: [117.0264, 36.0516],\n  泰州: [120.0586, 32.5525],\n  济南: [117.1582, 36.8701],\n  济宁: [116.8286, 35.3375],\n  海口: [110.3893, 19.8516],\n  淄博: [118.0371, 36.6064],\n  淮安: [118.927, 33.4039],\n  深圳: [114.5435, 22.5439],\n  清远: [112.9175, 24.3292],\n  温州: [120.498, 27.8119],\n  渭南: [109.7864, 35.0299],\n  湖州: [119.8608, 30.7782],\n  湘潭: [112.5439, 27.7075],\n  滨州: [117.8174, 37.4963],\n  潍坊: [119.0918, 36.524],\n  烟台: [120.7397, 37.5128],\n  玉溪: [101.9312, 23.8898],\n  珠海: [113.7305, 22.1155],\n  盐城: [120.2234, 33.5577],\n  盘锦: [121.9482, 41.0449],\n  石家庄: [114.4995, 38.1006],\n  福州: [119.4543, 25.9222],\n  秦皇岛: [119.2126, 40.0232],\n  绍兴: [120.564, 29.7565],\n  聊城: [115.9167, 36.4032],\n  肇庆: [112.1265, 23.5822],\n  舟山: [122.2559, 30.2234],\n  苏州: [120.6519, 31.3989],\n  莱芜: [117.6526, 36.2714],\n  菏泽: [115.6201, 35.2057],\n  营口: [122.4316, 40.4297],\n  葫芦岛: [120.1575, 40.578],\n  衡水: [115.8838, 37.7161],\n  衢州: [118.6853, 28.8666],\n  西宁: [101.4038, 36.8207],\n  西安: [109.1162, 34.2004],\n  贵阳: [106.6992, 26.7682],\n  连云港: [119.1248, 34.552],\n  邢台: [114.8071, 37.2821],\n  邯郸: [114.4775, 36.535],\n  郑州: [113.4668, 34.6234],\n  鄂尔多斯: [108.9734, 39.2487],\n  重庆: [107.7539, 30.1904],\n  金华: [120.0037, 29.1028],\n  铜川: [109.0393, 35.1947],\n  银川: [106.3586, 38.1775],\n  镇江: [119.4763, 31.9702],\n  长春: [125.8154, 44.2584],\n  长沙: [113.0823, 28.2568],\n  长治: [112.8625, 36.4746],\n  阳泉: [113.4778, 38.0951],\n  青岛: [120.4651, 36.3373],\n  韶关: [113.7964, 24.7028]\n};\n\nvar QDData = [[{ name: '青岛' }, { name: '上海', value: 10 }], [{ name: '青岛' }, { name: '广州', value: 10 }], [{ name: '青岛' }, { name: '大连', value: 10 }], [{ name: '青岛' }, { name: '南宁', value: 10 }], [{ name: '青岛' }, { name: '西宁', value: 10 }], [{ name: '青岛' }, { name: '南昌', value: 10 }], [{ name: '青岛' }, { name: '拉萨', value: 10 }], [{ name: '青岛' }, { name: '长春', value: 10 }], [{ name: '青岛' }, { name: '重庆', value: 10 }], [{ name: '青岛' }, { name: '常州', value: 10 }], [{ name: '青岛' }, { name: '沈阳', value: 10 }], [{ name: '青岛' }, { name: '武汉', value: 10 }], [{ name: '青岛' }, { name: '长沙', value: 10 }], [{ name: '青岛' }, { name: '太原', value: 10 }], [{ name: '青岛' }, { name: '哈尔滨', value: 10 }], [{ name: '青岛' }, { name: '石家庄', value: 10 }], [{ name: '青岛' }, { name: '杭州', value: 10 }], [{ name: '青岛' }, { name: '南京', value: 10 }], [{ name: '青岛' }, { name: '福州', value: 10 }], [{ name: '青岛' }, { name: '西宁', value: 10 }], [{ name: '青岛' }, { name: '合肥', value: 10 }], [{ name: '青岛' }, { name: '呼和浩特', value: 10 }], [{ name: '青岛' }, { name: '乌鲁木齐', value: 10 }], [{ name: '青岛' }, { name: '银川', value: 10 }], [{ name: '青岛' }, { name: '贵阳', value: 10 }], [{ name: '青岛' }, { name: '昆明', value: 10 }], [{ name: '青岛' }, { name: '兰州', value: 10 }], [{ name: '青岛' }, { name: '郑州', value: 10 }], [{ name: '青岛' }, { name: '成都', value: 10 }], [{ name: '青岛' }, { name: '海口', value: 10 }]];\n\nvar BJData = [[{ name: '北京' }, { name: '上海', value: 95 }], [{ name: '北京' }, { name: '广州', value: 90 }], [{ name: '北京' }, { name: '大连', value: 80 }], [{ name: '北京' }, { name: '南宁', value: 70 }], [{ name: '北京' }, { name: '南昌', value: 60 }], [{ name: '北京' }, { name: '拉萨', value: 50 }], [{ name: '北京' }, { name: '长春', value: 40 }], [{ name: '北京' }, { name: '包头', value: 30 }], [{ name: '北京' }, { name: '重庆', value: 20 }], [{ name: '北京' }, { name: '常州', value: 10 }]];\n\nvar SHData = [[{ name: '上海' }, { name: '包头', value: 95 }], [{ name: '上海' }, { name: '昆明', value: 90 }], [{ name: '上海' }, { name: '广州', value: 80 }], [{ name: '上海' }, { name: '郑州', value: 70 }], [{ name: '上海' }, { name: '长春', value: 60 }], [{ name: '上海' }, { name: '重庆', value: 50 }], [{ name: '上海' }, { name: '长沙', value: 40 }], [{ name: '上海' }, { name: '北京', value: 30 }], [{ name: '上海' }, { name: '丹东', value: 20 }], [{ name: '上海' }, { name: '大连', value: 10 }]];\n\nvar GZData = [[{ name: '广州' }, { name: '福州', value: 95 }], [{ name: '广州' }, { name: '太原', value: 90 }], [{ name: '广州' }, { name: '长春', value: 80 }], [{ name: '广州' }, { name: '重庆', value: 70 }], [{ name: '广州' }, { name: '西安', value: 60 }], [{ name: '广州' }, { name: '成都', value: 50 }], [{ name: '广州' }, { name: '常州', value: 40 }], [{ name: '广州' }, { name: '北京', value: 30 }], [{ name: '广州' }, { name: '北海', value: 20 }], [{ name: '广州' }, { name: '海口', value: 10 }]];\n\nvar planePath = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';\n\nvar convertData = function convertData(data) {\n  var res = [];\n  for (var i = 0; i < data.length; i++) {\n    var dataItem = data[i];\n    var fromCoord = geoCoordMap[dataItem[0].name];\n    var toCoord = geoCoordMap[dataItem[1].name];\n    if (fromCoord && toCoord) {\n      res.push([{\n        coord: fromCoord\n      }, {\n        coord: toCoord\n      }]);\n    }\n  }\n  return res;\n};\n\nvar color = ['#a6c84c', '#ffa022', '#46bee9'];\nvar series = [];[['青岛', QDData]].forEach(function (item, i) {\n  series.push({\n    name: item[0],\n    type: 'lines',\n    zlevel: 1,\n    effect: {\n      show: true,\n      period: 6,\n      trailLength: 0.5,\n      color: '#fff',\n      symbolSize: 3\n    },\n    lineStyle: {\n      normal: {\n        color: color[i],\n        width: 0,\n        curveness: 0.2\n      }\n    },\n    data: convertData(item[1])\n  }, {\n    name: item[0] + ' Top10',\n    type: 'lines',\n    zlevel: 2,\n    effect: {\n      show: true,\n      period: 6,\n      trailLength: 0,\n      symbol: planePath,\n      symbolSize: 10\n    },\n    lineStyle: {\n      normal: {\n        color: color[i],\n        width: 1,\n        opacity: 0.4,\n        curveness: 0.2\n      }\n    },\n    data: convertData(item[1])\n  }, {\n    name: item[0] + ' Top10',\n    type: 'effectScatter',\n    coordinateSystem: 'geo',\n    zlevel: 2,\n    rippleEffect: {\n      brushType: 'stroke'\n    },\n    label: {\n      normal: {\n        show: false,\n        position: 'right',\n        formatter: '{b}'\n      }\n    },\n    symbolSize: function symbolSize(val) {\n      return val[2] / 8;\n    },\n    itemStyle: {\n      normal: {\n        color: color[i]\n      }\n    },\n    data: item[1].map(function (dataItem) {\n      return {\n        name: dataItem[1].name,\n        value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])\n      };\n    })\n  });\n});\nseries.push({\n  name: '青岛',\n  type: 'effectScatter',\n  coordinateSystem: 'geo',\n  symbolSize: 16,\n  data: [{\n    name: '青岛',\n    value: [120.4651, 36.3373]\n  }],\n  itemStyle: {\n    normal: {\n      color: '#00ffff'\n    }\n  }\n});\noption = {\n  backgroundColor: '#404a59',\n\n  tooltip: {\n    trigger: 'none'\n  },\n\n  geo: {\n    map: 'china',\n    label: {\n      emphasis: {\n        show: false\n      },\n      normal: {\n        show: false\n      }\n    },\n    regions: [],\n    roam: false,\n    itemStyle: {\n      normal: {\n        areaColor: '#323c48',\n        borderColor: '#404a59'\n      },\n      emphasis: {\n        areaColor: '#2a333d'\n      }\n    }\n  },\n  series: series\n};\n\nmodule.exports = Event.extend(function Base(container, config) {\n  this.config = {\n    theme: {}\n  };\n  this.container = $(container);\n  this.apis = config.apis;\n  this._data = null;\n  this.chart = null;\n  this.init(config);\n}, {\n  init: function init(config) {\n    this.mergeConfig(config);\n\n    this.updateLayout();\n\n    this.chart = Chart.init(this.container[0]);\n\n    this.updateStyle();\n  },\n\n  render: function render(data, config) {\n    data = this.data(data);\n    var cfg = this.mergeConfig(config);\n\n    this.chart.setOption(option);\n\n    this.updateStyle();\n  },\n\n  resize: function resize(width, height) {\n    this.updateLayout(width, height);\n\n    this.chart.resize();\n  },\n\n  setColors: function setColors() {},\n\n  data: function data(_data) {\n    if (_data) {\n      this._data = _data;\n    }\n    return this._data;\n  },\n\n  mergeConfig: function mergeConfig(config) {\n    if (!config) {\n      return this.config;\n    }\n    this.config.theme = _.defaultsDeep(config.theme || {}, this.config.theme);\n    this.setColors();\n    this.config = _.defaultsDeep(config || {}, this.config);\n    return this.config;\n  },\n\n  updateLayout: function updateLayout() {},\n\n  updateStyle: function updateStyle() {\n    var cfg = this.config;\n    this.container.css({\n      'font-size': cfg.size + 'px',\n      color: cfg.color || '#fff'\n    });\n  },\n\n  destroy: function destroy() {\n    console.log('请实现 destroy 方法');\n  }\n});","codeWraped":"Cube(\"/index.js\", [\"/node_modules/bcore/event.js\", \"/node_modules/jquery/dist/jquery.js\", \"/node_modules/lodash/lodash.js\", \"/node_modules/echarts/index.js\", \"/node_modules/echarts/map/json/china.json\"], function (module, exports, require, load, process, global) {\n\n  var Event = require('/node_modules/bcore/event.js');\n  var $ = require('/node_modules/jquery/dist/jquery.js');\n  var _ = require('/node_modules/lodash/lodash.js');\n  var Chart = require('/node_modules/echarts/index.js');\n  var map = require('/node_modules/echarts/map/json/china.json');\n  Chart.registerMap('china', map);\n  var geoCoordMap = {\n    上海: [121.4648, 31.2891],\n    东莞: [113.8953, 22.901],\n    东营: [118.7073, 37.5513],\n    中山: [113.4229, 22.478],\n    临汾: [111.4783, 36.1615],\n    临沂: [118.3118, 35.2936],\n    丹东: [124.541, 40.4242],\n    丽水: [119.5642, 28.1854],\n    乌鲁木齐: [87.9236, 43.5883],\n    佛山: [112.8955, 23.1097],\n    保定: [115.0488, 39.0948],\n    兰州: [103.5901, 36.3043],\n    包头: [110.3467, 41.4899],\n    北京: [116.4551, 40.2539],\n    北海: [109.314, 21.6211],\n    南京: [118.8062, 31.9208],\n    南宁: [108.479, 23.1152],\n    南昌: [116.0046, 28.6633],\n    南通: [121.1023, 32.1625],\n    厦门: [118.1689, 24.6478],\n    台州: [121.1353, 28.6688],\n    合肥: [117.29, 32.0581],\n    呼和浩特: [111.4124, 40.4901],\n    咸阳: [108.4131, 34.8706],\n    哈尔滨: [127.9688, 45.368],\n    唐山: [118.4766, 39.6826],\n    嘉兴: [120.9155, 30.6354],\n    大同: [113.7854, 39.8035],\n    大连: [122.2229, 39.4409],\n    天津: [117.4219, 39.4189],\n    太原: [112.3352, 37.9413],\n    威海: [121.9482, 37.1393],\n    宁波: [121.5967, 29.6466],\n    宝鸡: [107.1826, 34.3433],\n    宿迁: [118.5535, 33.7775],\n    常州: [119.4543, 31.5582],\n    广州: [113.5107, 23.2196],\n    廊坊: [116.521, 39.0509],\n    延安: [109.1052, 36.4252],\n    张家口: [115.1477, 40.8527],\n    徐州: [117.5208, 34.3268],\n    德州: [116.6858, 37.2107],\n    惠州: [114.6204, 23.1647],\n    成都: [103.9526, 30.7617],\n    扬州: [119.4653, 32.8162],\n    承德: [117.5757, 41.4075],\n    拉萨: [91.1865, 30.1465],\n    无锡: [120.3442, 31.5527],\n    日照: [119.2786, 35.5023],\n    昆明: [102.9199, 25.4663],\n    杭州: [119.5313, 29.8773],\n    枣庄: [117.323, 34.8926],\n    柳州: [109.3799, 24.9774],\n    株洲: [113.5327, 27.0319],\n    武汉: [114.3896, 30.6628],\n    汕头: [117.1692, 23.3405],\n    江门: [112.6318, 22.1484],\n    沈阳: [123.1238, 42.1216],\n    沧州: [116.8286, 38.2104],\n    河源: [114.917, 23.9722],\n    泉州: [118.3228, 25.1147],\n    泰安: [117.0264, 36.0516],\n    泰州: [120.0586, 32.5525],\n    济南: [117.1582, 36.8701],\n    济宁: [116.8286, 35.3375],\n    海口: [110.3893, 19.8516],\n    淄博: [118.0371, 36.6064],\n    淮安: [118.927, 33.4039],\n    深圳: [114.5435, 22.5439],\n    清远: [112.9175, 24.3292],\n    温州: [120.498, 27.8119],\n    渭南: [109.7864, 35.0299],\n    湖州: [119.8608, 30.7782],\n    湘潭: [112.5439, 27.7075],\n    滨州: [117.8174, 37.4963],\n    潍坊: [119.0918, 36.524],\n    烟台: [120.7397, 37.5128],\n    玉溪: [101.9312, 23.8898],\n    珠海: [113.7305, 22.1155],\n    盐城: [120.2234, 33.5577],\n    盘锦: [121.9482, 41.0449],\n    石家庄: [114.4995, 38.1006],\n    福州: [119.4543, 25.9222],\n    秦皇岛: [119.2126, 40.0232],\n    绍兴: [120.564, 29.7565],\n    聊城: [115.9167, 36.4032],\n    肇庆: [112.1265, 23.5822],\n    舟山: [122.2559, 30.2234],\n    苏州: [120.6519, 31.3989],\n    莱芜: [117.6526, 36.2714],\n    菏泽: [115.6201, 35.2057],\n    营口: [122.4316, 40.4297],\n    葫芦岛: [120.1575, 40.578],\n    衡水: [115.8838, 37.7161],\n    衢州: [118.6853, 28.8666],\n    西宁: [101.4038, 36.8207],\n    西安: [109.1162, 34.2004],\n    贵阳: [106.6992, 26.7682],\n    连云港: [119.1248, 34.552],\n    邢台: [114.8071, 37.2821],\n    邯郸: [114.4775, 36.535],\n    郑州: [113.4668, 34.6234],\n    鄂尔多斯: [108.9734, 39.2487],\n    重庆: [107.7539, 30.1904],\n    金华: [120.0037, 29.1028],\n    铜川: [109.0393, 35.1947],\n    银川: [106.3586, 38.1775],\n    镇江: [119.4763, 31.9702],\n    长春: [125.8154, 44.2584],\n    长沙: [113.0823, 28.2568],\n    长治: [112.8625, 36.4746],\n    阳泉: [113.4778, 38.0951],\n    青岛: [120.4651, 36.3373],\n    韶关: [113.7964, 24.7028] };\n\n\n  var QDData = [[{ name: '青岛' }, { name: '上海', value: 10 }], [{ name: '青岛' }, { name: '广州', value: 10 }], [{ name: '青岛' }, { name: '大连', value: 10 }], [{ name: '青岛' }, { name: '南宁', value: 10 }], [{ name: '青岛' }, { name: '西宁', value: 10 }], [{ name: '青岛' }, { name: '南昌', value: 10 }], [{ name: '青岛' }, { name: '拉萨', value: 10 }], [{ name: '青岛' }, { name: '长春', value: 10 }], [{ name: '青岛' }, { name: '重庆', value: 10 }], [{ name: '青岛' }, { name: '常州', value: 10 }], [{ name: '青岛' }, { name: '沈阳', value: 10 }], [{ name: '青岛' }, { name: '武汉', value: 10 }], [{ name: '青岛' }, { name: '长沙', value: 10 }], [{ name: '青岛' }, { name: '太原', value: 10 }], [{ name: '青岛' }, { name: '哈尔滨', value: 10 }], [{ name: '青岛' }, { name: '石家庄', value: 10 }], [{ name: '青岛' }, { name: '杭州', value: 10 }], [{ name: '青岛' }, { name: '南京', value: 10 }], [{ name: '青岛' }, { name: '福州', value: 10 }], [{ name: '青岛' }, { name: '西宁', value: 10 }], [{ name: '青岛' }, { name: '合肥', value: 10 }], [{ name: '青岛' }, { name: '呼和浩特', value: 10 }], [{ name: '青岛' }, { name: '乌鲁木齐', value: 10 }], [{ name: '青岛' }, { name: '银川', value: 10 }], [{ name: '青岛' }, { name: '贵阳', value: 10 }], [{ name: '青岛' }, { name: '昆明', value: 10 }], [{ name: '青岛' }, { name: '兰州', value: 10 }], [{ name: '青岛' }, { name: '郑州', value: 10 }], [{ name: '青岛' }, { name: '成都', value: 10 }], [{ name: '青岛' }, { name: '海口', value: 10 }]];\n\n  var BJData = [[{ name: '北京' }, { name: '上海', value: 95 }], [{ name: '北京' }, { name: '广州', value: 90 }], [{ name: '北京' }, { name: '大连', value: 80 }], [{ name: '北京' }, { name: '南宁', value: 70 }], [{ name: '北京' }, { name: '南昌', value: 60 }], [{ name: '北京' }, { name: '拉萨', value: 50 }], [{ name: '北京' }, { name: '长春', value: 40 }], [{ name: '北京' }, { name: '包头', value: 30 }], [{ name: '北京' }, { name: '重庆', value: 20 }], [{ name: '北京' }, { name: '常州', value: 10 }]];\n\n  var SHData = [[{ name: '上海' }, { name: '包头', value: 95 }], [{ name: '上海' }, { name: '昆明', value: 90 }], [{ name: '上海' }, { name: '广州', value: 80 }], [{ name: '上海' }, { name: '郑州', value: 70 }], [{ name: '上海' }, { name: '长春', value: 60 }], [{ name: '上海' }, { name: '重庆', value: 50 }], [{ name: '上海' }, { name: '长沙', value: 40 }], [{ name: '上海' }, { name: '北京', value: 30 }], [{ name: '上海' }, { name: '丹东', value: 20 }], [{ name: '上海' }, { name: '大连', value: 10 }]];\n\n  var GZData = [[{ name: '广州' }, { name: '福州', value: 95 }], [{ name: '广州' }, { name: '太原', value: 90 }], [{ name: '广州' }, { name: '长春', value: 80 }], [{ name: '广州' }, { name: '重庆', value: 70 }], [{ name: '广州' }, { name: '西安', value: 60 }], [{ name: '广州' }, { name: '成都', value: 50 }], [{ name: '广州' }, { name: '常州', value: 40 }], [{ name: '广州' }, { name: '北京', value: 30 }], [{ name: '广州' }, { name: '北海', value: 20 }], [{ name: '广州' }, { name: '海口', value: 10 }]];\n\n  var planePath = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';\n\n  var convertData = function convertData(data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n      var dataItem = data[i];\n      var fromCoord = geoCoordMap[dataItem[0].name];\n      var toCoord = geoCoordMap[dataItem[1].name];\n      if (fromCoord && toCoord) {\n        res.push([{\n          coord: fromCoord },\n        {\n          coord: toCoord }]);\n\n      }\n    }\n    return res;\n  };\n\n  var color = ['#a6c84c', '#ffa022', '#46bee9'];\n  var series = [];[['青岛', QDData]].forEach(function (item, i) {\n    series.push({\n      name: item[0],\n      type: 'lines',\n      zlevel: 1,\n      effect: {\n        show: true,\n        period: 6,\n        trailLength: 0.5,\n        color: '#fff',\n        symbolSize: 3 },\n\n      lineStyle: {\n        normal: {\n          color: color[i],\n          width: 0,\n          curveness: 0.2 } },\n\n\n      data: convertData(item[1]) },\n    {\n      name: item[0] + ' Top10',\n      type: 'lines',\n      zlevel: 2,\n      effect: {\n        show: true,\n        period: 6,\n        trailLength: 0,\n        symbol: planePath,\n        symbolSize: 10 },\n\n      lineStyle: {\n        normal: {\n          color: color[i],\n          width: 1,\n          opacity: 0.4,\n          curveness: 0.2 } },\n\n\n      data: convertData(item[1]) },\n    {\n      name: item[0] + ' Top10',\n      type: 'effectScatter',\n      coordinateSystem: 'geo',\n      zlevel: 2,\n      rippleEffect: {\n        brushType: 'stroke' },\n\n      label: {\n        normal: {\n          show: false,\n          position: 'right',\n          formatter: '{b}' } },\n\n\n      symbolSize: function symbolSize(val) {\n        return val[2] / 8;\n      },\n      itemStyle: {\n        normal: {\n          color: color[i] } },\n\n\n      data: item[1].map(function (dataItem) {\n        return {\n          name: dataItem[1].name,\n          value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value]) };\n\n      }) });\n\n  });\n  series.push({\n    name: '青岛',\n    type: 'effectScatter',\n    coordinateSystem: 'geo',\n    symbolSize: 16,\n    data: [{\n      name: '青岛',\n      value: [120.4651, 36.3373] }],\n\n    itemStyle: {\n      normal: {\n        color: '#00ffff' } } });\n\n\n\n  option = {\n    backgroundColor: '#404a59',\n\n    tooltip: {\n      trigger: 'none' },\n\n\n    geo: {\n      map: 'china',\n      label: {\n        emphasis: {\n          show: false },\n\n        normal: {\n          show: false } },\n\n\n      regions: [],\n      roam: false,\n      itemStyle: {\n        normal: {\n          areaColor: '#323c48',\n          borderColor: '#404a59' },\n\n        emphasis: {\n          areaColor: '#2a333d' } } },\n\n\n\n    series: series };\n\n\n  module.exports = Event.extend(function Base(container, config) {\n    this.config = {\n      theme: {} };\n\n    this.container = $(container);\n    this.apis = config.apis;\n    this._data = null;\n    this.chart = null;\n    this.init(config);\n  }, {\n    init: function init(config) {\n      this.mergeConfig(config);\n\n      this.updateLayout();\n\n      this.chart = Chart.init(this.container[0]);\n\n      this.updateStyle();\n    },\n\n    render: function render(data, config) {\n      data = this.data(data);\n      var cfg = this.mergeConfig(config);\n\n      this.chart.setOption(option);\n\n      this.updateStyle();\n    },\n\n    resize: function resize(width, height) {\n      this.updateLayout(width, height);\n\n      this.chart.resize();\n    },\n\n    setColors: function setColors() {},\n\n    data: function data(_data) {\n      if (_data) {\n        this._data = _data;\n      }\n      return this._data;\n    },\n\n    mergeConfig: function mergeConfig(config) {\n      if (!config) {\n        return this.config;\n      }\n      this.config.theme = _.defaultsDeep(config.theme || {}, this.config.theme);\n      this.setColors();\n      this.config = _.defaultsDeep(config || {}, this.config);\n      return this.config;\n    },\n\n    updateLayout: function updateLayout() {},\n\n    updateStyle: function updateStyle() {\n      var cfg = this.config;\n      this.container.css({\n        'font-size': cfg.size + 'px',\n        color: cfg.color || '#fff' });\n\n    },\n\n    destroy: function destroy() {\n      console.log('请实现 destroy 方法');\n    } });return module.exports;});","sourceMap":null,"modifyTime":1553257082603,"mime":"application/javascript","wrap":true,"skip":false,"compress":false,"ext":".js","targetExt":".js","loads":[],"originalLoads":[],"requires":["/node_modules/bcore/event.js","/node_modules/jquery/dist/jquery.js","/node_modules/lodash/lodash.js","/node_modules/echarts/index.js","/node_modules/echarts/map/json/china.json"],"requiresOrigin":["/node_modules/bcore/event.js","/node_modules/jquery/dist/jquery.js","/node_modules/lodash/lodash.js","/node_modules/echarts/index.js","/node_modules/echarts/map/json/china.json"],"debugInfo":[],"requiresArgsRefer":[{"type":"StringLiteral","start":35,"end":48,"loc":{"start":{"line":3,"column":20},"end":{"line":3,"column":33}},"extra":{"rawValue":"bcore/event","raw":"'bcore/event'"},"value":"/node_modules/bcore/event.js"},{"type":"StringLiteral","start":67,"end":75,"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":24}},"extra":{"rawValue":"jquery","raw":"'jquery'"},"value":"/node_modules/jquery/dist/jquery.js"},{"type":"StringLiteral","start":94,"end":102,"loc":{"start":{"line":5,"column":16},"end":{"line":5,"column":24}},"extra":{"rawValue":"lodash","raw":"'lodash'"},"value":"/node_modules/lodash/lodash.js"},{"type":"StringLiteral","start":125,"end":134,"loc":{"start":{"line":6,"column":20},"end":{"line":6,"column":29}},"extra":{"rawValue":"echarts","raw":"'echarts'"},"value":"/node_modules/echarts/index.js"},{"type":"StringLiteral","start":155,"end":184,"loc":{"start":{"line":7,"column":18},"end":{"line":7,"column":47}},"extra":{"rawValue":"echarts/map/json/china.json","raw":"'echarts/map/json/china.json'"},"value":"/node_modules/echarts/map/json/china.json"}]}